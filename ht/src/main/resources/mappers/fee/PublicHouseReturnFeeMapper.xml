<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <!-- 
  /**
  	* 模块：供热缴费管理
  	* 公建退费记录的接口Mapper映射
  	* 表：公建供热退费记录表 HT_PublicHouseFeeReturnRecord
  	*
  	* @author 张晓龙
  	*/
   -->
  
<mapper namespace = "com.neusoft.ht.fee.mapper.IPublicHouseReturnFeeMapper">
	<!-- 启动此映射的全局缓存 -->
	<cache/>
	
	<!-- 无关联属性的结果映射 -->
	<resultMap id = "PublicHouseReturnFeeResultMap" type = "PublicHouseReturnFee">
		<id property = "recordno" column = "RecordNo" />
		<result property = "amount" column = "Amount" />
		<result property = "returndate" column = "returnDate" />
		<result property = "person" column = "Person" />
		<result property = "checkcode" column = "CheckCode" />
		<result property = "invoicecode" column = "InvoiceCode" />
		<result property = "recorddesc" column = "RecordDesc" />
		<result property = "recordstatus" column = "RecordStatus" />
	</resultMap>
	
	<insert id = "insert" keyProperty = "recordno" keyColumn = "RecordNo" useGeneratedKey = "true" flushCache = "true">
		insert into HT_PublicHouseFeeReturnRecord (
			Amount, returnDate, Person, CheckCode, 
			InvoiceCode, RecordDesc, RecordStatus 
		) value (
			#{amount}, #{returndate}, #{person}, #{checkcode}
			#{invoicecode}, #{recorddesc}, #{recordstatus} 
		)
	</insert>
	
	<update id = "update" flushCache = "true">
		update HT_PublicHouseFeeReturnRecord 
		<set> 
			<if test = "Amount != null">Amount = #{amount}, </if>
			<if test = "returnDate != null">returnDate = #{returndate}, </if>
			<if test = "ActualFee != null">ActualFee = #{actualfee}, </if>
			<if test = "Person != null">Person = #{person}, </if>
			<if test = "CheckCode != null">CheckCode = #{checkcode}, </if>
			<if test = "InvoiceCode != null">InvoiceCode = #{invoicecode}, </if>
			<if test = "RecordDesc != null">RecordDesc = #{recorddesc}, </if>
			<if test = "RecordStatus != null">RecordStatus = #{recordstatus} </if>
		</set>
		where 
			RecordNo = #{recordno}
	</update>
	
	<delete id = "delete" flushCache = "true">
		delete from HT_PublicHouseFeeReturnRecord where RecordNo = #{recordno}
	</delete>
	
	<select id = "selectListByAll" resultMap = "PublicHouseReturnFeeResultMap">
		select * from HT_PublicHouseFeeReturnRecord
	</select>
	
	<select id = "selectByNo" resultMap = "PublicHouseReturnFeeResultMap">
		select * from HT_PublicHouseFeeReturnRecord where RecordNo = #{recordno}
	</select>
	
	<select id = "selectListByAllWithPage" resultMap = "PublicHouseReturnFeeResultMap">
		select * from HT_PublicHouseFeeReturnRecord limit #{start}, #{rows}
	</select>
	
	<!-- 使用IFNULL函数判断count函数结果是否为null, 为null返回0 -->
	<select id = "selectCountByAll" resultType = "int">
		select IFNULL(count(RecordNo), 0) from HT_PublicHouseFeeReturnRecord
	</select>
</mapper>